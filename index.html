<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è³‡è¨Šç§‘æŠ€é€±äº’å‹•å€ V2</title>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=LXGW+WenKai:wght@400;700&family=Noto+Sans+SC:wght@400;600;700&display=swap");

    :root {
      --bg-a: #fff7ec;
      --bg-b: #f6fff9;
      --bg-c: #eef5ff;
      --text: #1f2e3d;
      --muted: #627487;
      --primary: #1fbf9f;
      --accent: #ff9f43;
      --info: #4d7cfe;
      --danger: #f45b69;
      --surface: rgba(255, 255, 255, 0.88);
      --border: rgba(52, 91, 134, 0.14);
      --shadow: 0 12px 34px rgba(70, 98, 130, 0.16);
      --radius-lg: 24px;
      --radius-md: 18px;
      --radius-sm: 12px;
      --board-gap: 10px;
      --ttt-cell-size: 110px;
      --memory-cell-size: 74px;
      --speed-pad-height: clamp(260px, 46vh, 430px);
      --react-pad-height: clamp(260px, 46vh, 430px);
      --balloon-field-height: clamp(300px, 52vh, 500px);
      --game-shell-padding: 18px;
      --button-min-height: 44px;
      --tug-track-height: 44px;
      --tug-knot-size: 40px;
      --tug-btn-height: 112px;
      --tug-arena-padding: 16px;
      --card-illustration-opacity: 0.22;
      --focus-ring: 0 0 0 3px rgba(77, 124, 254, 0.26);
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      min-height: 100%;
      font-family: "Noto Sans SC", "LXGW WenKai", "Microsoft YaHei", sans-serif;
      color: var(--text);
      background:
        radial-gradient(circle at 8% 9%, rgba(80, 176, 255, 0.18), transparent 30%),
        radial-gradient(circle at 88% 5%, rgba(31, 191, 159, 0.18), transparent 28%),
        linear-gradient(145deg, var(--bg-a), var(--bg-b) 48%, var(--bg-c));
      overflow-x: hidden;
    }

    body {
      padding: 16px;
      position: relative;
    }

    .bg-shape {
      position: fixed;
      border-radius: 999px;
      filter: blur(2px);
      pointer-events: none;
      z-index: -1;
    }

    .shape-a {
      width: 260px;
      height: 260px;
      left: -80px;
      top: -90px;
      background: rgba(31, 191, 159, 0.2);
    }

    .shape-b {
      width: 300px;
      height: 300px;
      right: -120px;
      bottom: -120px;
      background: rgba(255, 159, 67, 0.2);
    }

    .scene {
      width: min(1140px, 100%);
      margin: 0 auto;
      animation: fade-slide 0.2s ease-out;
    }

    .scene[hidden] {
      display: none !important;
    }

    .home-shell {
      position: relative;
      isolation: isolate;
      background:
        radial-gradient(circle at 8% 6%, rgba(132, 191, 255, 0.16), transparent 34%),
        linear-gradient(165deg, rgba(255, 255, 255, 0.95), rgba(248, 252, 255, 0.92));
      border: 1px solid rgba(52, 94, 135, 0.18);
      border-radius: var(--radius-lg);
      box-shadow:
        0 10px 24px rgba(98, 127, 158, 0.16),
        0 24px 48px rgba(79, 110, 143, 0.08);
      padding: 22px;
      backdrop-filter: blur(7px);
      overflow: hidden;
    }

    .home-shell::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background:
        linear-gradient(120deg, rgba(255, 255, 255, 0.14), transparent 38%),
        repeating-linear-gradient(
          -35deg,
          rgba(77, 124, 254, 0.03) 0 10px,
          rgba(31, 191, 159, 0.03) 10px 20px
        );
      z-index: -1;
    }

    .home-header {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 16px;
    }

    .home-title h1 {
      margin: 0;
      font-family: "LXGW WenKai", "Noto Sans SC", sans-serif;
      font-size: clamp(2rem, 4vw, 3rem);
      line-height: 1.05;
    }

    .home-title p {
      margin: 8px 0 0;
      color: var(--muted);
      font-size: 0.96rem;
    }

    .top-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .school-brand {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 9px 12px;
      border-radius: 14px;
      border: 1px solid rgba(53, 93, 134, 0.2);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(245, 251, 255, 0.82));
      box-shadow: 0 5px 12px rgba(77, 111, 146, 0.09);
      min-width: min(560px, 100%);
    }

    .school-logo {
      width: 56px;
      height: 56px;
      border-radius: 999px;
      border: 1px solid rgba(47, 86, 123, 0.25);
      background: #ffffff;
      object-fit: cover;
      flex-shrink: 0;
    }

    .school-meta {
      min-width: 0;
      display: grid;
      gap: 2px;
    }

    .school-meta .zh {
      font-size: 1.01rem;
      font-weight: 700;
      color: #29405f;
      line-height: 1.2;
    }

    .school-meta .en {
      font-size: 0.72rem;
      color: #4a6078;
      line-height: 1.2;
    }

    .entry-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(220px, 1fr));
      gap: 12px;
      margin-top: 12px;
    }

    .entry-card {
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(38, 88, 132, 0.15);
      border-radius: var(--radius-md);
      background:
        radial-gradient(circle at 86% 10%, rgba(255, 255, 255, 0.66), transparent 34%),
        linear-gradient(165deg, rgba(255, 255, 255, 0.96), rgba(245, 250, 255, 0.92));
      padding: 14px;
      text-align: left;
      cursor: pointer;
      min-height: 155px;
      transition: transform 0.22s ease, box-shadow 0.22s ease, border-color 0.22s ease;
    }

    .entry-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 24px rgba(92, 122, 152, 0.2);
      border-color: rgba(62, 106, 150, 0.3);
    }

    .entry-card:active {
      transform: translateY(0);
    }

    .entry-card::after {
      position: absolute;
      right: 10px;
      bottom: 8px;
      font-size: 2rem;
      line-height: 1;
      opacity: var(--card-illustration-opacity);
      filter: drop-shadow(0 2px 3px rgba(43, 69, 97, 0.16));
      pointer-events: none;
    }

    .entry-card[data-scene="speed"]::after {
      content: "â±";
    }

    .entry-card[data-scene="duel"]::after {
      content: "ğŸ";
    }

    .entry-card[data-scene="ttt"]::after {
      content: "âœ¦";
    }

    .entry-card[data-scene="react"]::after {
      content: "âš¡";
    }

    .entry-card[data-scene="balloon"]::after {
      content: "ğŸˆ";
    }

    .entry-card[data-scene="memory"]::after {
      content: "ğŸ§©";
    }

    .entry-card .tag {
      display: inline-flex;
      align-items: center;
      height: 30px;
      padding: 0 10px;
      border-radius: 999px;
      background: rgba(31, 191, 159, 0.14);
      color: #168770;
      font-size: 0.82rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .entry-card h3 {
      margin: 0;
      font-size: 1.18rem;
      color: #2d4260;
    }

    .entry-card p {
      margin: 8px 0 0;
      color: var(--muted);
      font-size: 0.9rem;
      line-height: 1.35;
    }

    .entry-card.accent-a .tag {
      background: rgba(31, 191, 159, 0.16);
      color: #127663;
    }

    .entry-card.accent-b .tag {
      background: rgba(77, 124, 254, 0.16);
      color: #315ad3;
    }

    .entry-card.accent-c .tag {
      background: rgba(255, 159, 67, 0.2);
      color: #c26910;
    }

    .game-shell {
      position: relative;
      isolation: isolate;
      background:
        linear-gradient(180deg, rgba(255, 255, 255, 0.96), rgba(247, 252, 255, 0.9)),
        var(--surface);
      border: 1px solid rgba(56, 97, 137, 0.2);
      border-radius: var(--radius-lg);
      box-shadow:
        0 10px 24px rgba(97, 127, 157, 0.16),
        0 20px 40px rgba(79, 109, 141, 0.08);
      padding: var(--game-shell-padding);
      min-height: calc(100vh - 32px);
      overflow: hidden;
    }

    .game-shell::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background: radial-gradient(circle at 90% 8%, rgba(108, 177, 255, 0.1), transparent 34%);
      z-index: -1;
    }

    .scene-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 12px;
      padding: 10px 12px;
      border: 1px solid rgba(58, 98, 140, 0.16);
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.94), rgba(245, 250, 255, 0.86));
    }

    .scene-head h2 {
      margin: 0;
      font-family: "LXGW WenKai", "Noto Sans SC", sans-serif;
      font-size: clamp(1.5rem, 2.6vw, 2rem);
      color: #2b3f5e;
    }

    .scene-desc {
      margin: 0 0 10px;
      color: var(--muted);
      font-size: 0.93rem;
    }

    .status {
      min-height: 22px;
      font-size: 0.92rem;
      color: #415b78;
      margin: 10px 0 0;
    }

    .chip-row,
    .control-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }

    .chip {
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(58, 98, 141, 0.2);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.96), rgba(246, 250, 255, 0.9));
      font-size: 0.9rem;
      color: #3f5772;
      box-shadow: 0 4px 10px rgba(92, 123, 154, 0.08);
    }

    .chip strong {
      color: #23446a;
    }

    button {
      appearance: none;
      border: 1px solid rgba(50, 92, 133, 0.2);
      background: linear-gradient(180deg, #ffffff, #f1f8ff);
      color: #2b425d;
      border-radius: var(--radius-sm);
      min-height: var(--button-min-height);
      padding: 9px 13px;
      font: inherit;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
      box-shadow:
        0 4px 10px rgba(78, 106, 136, 0.12),
        inset 0 -1px 0 rgba(255, 255, 255, 0.8);
    }

    button:hover {
      transform: translateY(-1px);
    }

    button:active {
      transform: translateY(1px);
      box-shadow: 0 2px 6px rgba(78, 106, 136, 0.18);
    }

    button:focus-visible {
      outline: none;
      box-shadow: var(--focus-ring), 0 4px 10px rgba(78, 106, 136, 0.14);
    }

    button:disabled {
      opacity: 0.52;
      cursor: not-allowed;
      transform: none;
    }

    .primary {
      border-color: rgba(23, 133, 111, 0.3);
      background: linear-gradient(180deg, #e9fff8, #d2f9ec);
      color: #0f6a56;
    }

    .ghost {
      background: linear-gradient(180deg, #ffffff, #f7f7f7);
      color: #415b78;
    }

    .warn {
      border-color: rgba(193, 108, 15, 0.3);
      background: linear-gradient(180deg, #fff3e6, #ffe1bf);
      color: #9a5708;
    }

    .back-btn {
      border-color: rgba(77, 124, 254, 0.3);
      background: linear-gradient(180deg, #eff3ff, #dce6ff);
      color: #3557c8;
    }

    .danger {
      border-color: rgba(175, 51, 69, 0.35);
      background: linear-gradient(180deg, #ffecef, #ffd9df);
      color: #a33045;
    }
    .speed-pad {
      position: relative;
      margin: 12px auto 0;
      width: min(980px, 100%);
      height: var(--speed-pad-height);
      border-radius: 26px;
      border: 1px solid rgba(201, 119, 31, 0.36);
      background:
        radial-gradient(circle at 25% 18%, rgba(255, 245, 198, 0.72), transparent 34%),
        linear-gradient(165deg, #ffe0b5, #ffbb6f 52%, #ff9f43);
      color: #704003;
      font-size: clamp(1rem, 2.2vw, 1.26rem);
      box-shadow: 0 10px 20px rgba(241, 168, 89, 0.35);
      display: grid;
      place-items: center;
      overflow: hidden;
      touch-action: manipulation;
      user-select: none;
    }

    .speed-pad .hint {
      position: relative;
      z-index: 1;
      font-weight: 700;
      text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
    }

    .speed-ripple {
      position: absolute;
      width: 12px;
      height: 12px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.62);
      border: 2px solid rgba(255, 255, 255, 0.82);
      transform: translate(-50%, -50%);
      pointer-events: none;
      animation: speed-ripple 0.32s ease-out forwards;
    }

    .school-badge {
      margin: 10px 0 6px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      border: 1px solid rgba(56, 98, 137, 0.18);
      border-radius: 999px;
      padding: 4px 10px 4px 4px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(245, 251, 255, 0.8));
      color: #3a5572;
      font-size: 0.8rem;
      box-shadow: 0 4px 10px rgba(84, 114, 145, 0.1);
    }

    .school-badge-logo {
      width: 24px;
      height: 24px;
      border-radius: 999px;
      border: 1px solid rgba(52, 91, 130, 0.2);
      background: #ffffff;
      object-fit: cover;
    }

    .tug-shell {
      margin-top: 12px;
      border: 1px solid rgba(56, 97, 134, 0.24);
      border-radius: 18px;
      background:
        radial-gradient(circle at 12% 8%, rgba(158, 210, 255, 0.2), transparent 34%),
        linear-gradient(170deg, rgba(255, 255, 255, 0.95), rgba(237, 247, 255, 0.9));
      padding: var(--tug-arena-padding);
      overflow: hidden;
      touch-action: manipulation;
    }

    .tug-arena {
      border-radius: 14px;
      border: 1px dashed rgba(70, 109, 149, 0.24);
      background:
        repeating-linear-gradient(
          -25deg,
          rgba(255, 255, 255, 0.26) 0 10px,
          rgba(238, 246, 255, 0.26) 10px 20px
        );
      padding: clamp(10px, 2.2vw, 16px);
      transition: border-color 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
      animation: arena-enter 0.2s ease-out;
      max-width: 100%;
      overflow: hidden;
    }

    .tug-arena[data-state="running"] {
      border-color: rgba(52, 103, 152, 0.35);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.6);
    }

    .tug-arena[data-state="ended"] {
      border-color: rgba(60, 107, 156, 0.45);
      box-shadow: 0 10px 18px rgba(93, 123, 154, 0.18);
    }

    .tug-track {
      position: relative;
      height: var(--tug-track-height);
      border-radius: 999px;
      border: 1px solid rgba(56, 98, 137, 0.24);
      background:
        linear-gradient(90deg, rgba(111, 194, 255, 0.24), rgba(255, 255, 255, 0.9) 50%, rgba(112, 231, 193, 0.26)),
        #ffffff;
      overflow: hidden;
    }

    .tug-rope {
      position: absolute;
      left: 3%;
      right: 3%;
      top: 50%;
      height: 8px;
      border-radius: 999px;
      transform: translateY(-50%);
      background:
        repeating-linear-gradient(
          90deg,
          rgba(201, 139, 82, 0.92) 0 10px,
          rgba(173, 113, 61, 0.92) 10px 20px
        );
      box-shadow: inset 0 1px 0 rgba(255, 236, 217, 0.86), 0 2px 6px rgba(148, 95, 55, 0.3);
      pointer-events: none;
    }

    .tug-center-flag {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      width: clamp(30px, 4.5vw, 42px);
      height: clamp(26px, 3.5vw, 34px);
      border-radius: 8px;
      border: 1px solid rgba(209, 111, 61, 0.45);
      background: linear-gradient(180deg, #ffe9d8, #ffc895);
      box-shadow: 0 3px 8px rgba(196, 113, 74, 0.24);
      pointer-events: none;
      z-index: 2;
    }

    .tug-center-flag::before {
      content: "";
      position: absolute;
      left: 50%;
      bottom: -12px;
      width: 2px;
      height: 12px;
      transform: translateX(-50%);
      background: rgba(195, 107, 73, 0.62);
    }

    .tug-center-flag::after {
      content: "ä¸­ç·š";
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      font-size: 0.66rem;
      font-weight: 700;
      color: #a75622;
      letter-spacing: 0.03em;
    }

    .tug-lead-glow {
      position: absolute;
      inset: 2px;
      border-radius: 999px;
      background:
        radial-gradient(circle at 30% 50%, rgba(84, 180, 255, 0.34), transparent 44%),
        radial-gradient(circle at 70% 50%, rgba(83, 230, 176, 0.34), transparent 44%);
      transition: opacity 0.12s ease;
      pointer-events: none;
      opacity: 0.48;
    }

    .tug-arena[data-lead="p1"] .tug-lead-glow {
      background: radial-gradient(circle at 28% 50%, rgba(84, 180, 255, 0.45), transparent 44%);
      opacity: 0.72;
    }

    .tug-arena[data-lead="p2"] .tug-lead-glow {
      background: radial-gradient(circle at 72% 50%, rgba(65, 218, 164, 0.45), transparent 44%);
      opacity: 0.72;
    }

    .tug-knot {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: var(--tug-knot-size);
      height: var(--tug-knot-size);
      border-radius: 999px;
      border: 2px solid rgba(211, 111, 62, 0.72);
      background:
        radial-gradient(circle at 30% 22%, #fff2e6, #ffd09f 56%, #ffad66);
      box-shadow:
        0 7px 14px rgba(208, 109, 65, 0.3),
        inset 0 -2px 0 rgba(191, 103, 59, 0.35);
      transition: left 0.06s linear;
      z-index: 3;
    }

    .tug-knot.is-impact {
      animation: rope-pulse 0.3s ease-out;
    }

    .tug-teams {
      display: flex;
      justify-content: space-between;
      margin-top: 9px;
      gap: 8px;
      flex-wrap: wrap;
      font-size: 0.82rem;
      color: #3f5772;
      font-weight: 700;
    }

    .tug-team {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(58, 98, 140, 0.18);
      background: rgba(255, 255, 255, 0.84);
    }

    .tug-team.p1::before,
    .tug-team.p2::before {
      content: "";
      width: 9px;
      height: 9px;
      border-radius: 999px;
    }

    .tug-team.p1::before {
      background: #4eaaf9;
    }

    .tug-team.p2::before {
      background: #35c992;
    }

    .tug-controls {
      margin-top: 10px;
      display: grid;
      grid-template-columns: repeat(2, minmax(180px, 1fr));
      gap: 10px;
    }

    .tug-btn {
      position: relative;
      min-height: var(--tug-btn-height);
      border-radius: 18px;
      border: 1px solid rgba(52, 93, 133, 0.24);
      font-size: clamp(1rem, 2.2vw, 1.14rem);
      font-weight: 700;
      overflow: hidden;
    }

    .tug-btn::before {
      position: absolute;
      inset: auto 10px 8px auto;
      font-size: 1.3rem;
      opacity: 0.24;
      pointer-events: none;
    }

    .tug-btn.p1::before {
      content: "â—€";
    }

    .tug-btn.p2::before {
      content: "â–¶";
    }

    .tug-btn.is-pressed {
      animation: button-press 0.3s ease-out;
    }

    .tug-btn.p1 {
      background:
        radial-gradient(circle at 26% 20%, rgba(223, 244, 255, 0.88), transparent 38%),
        radial-gradient(circle at 30% 28%, #bfe7ff, #7dc5ff 58%, #56afff);
      color: #103b66;
    }

    .tug-btn.p2 {
      background:
        radial-gradient(circle at 26% 20%, rgba(224, 255, 243, 0.88), transparent 38%),
        radial-gradient(circle at 30% 28%, #c8ffe7, #89f0c4 58%, #54dbab);
      color: #0b6148;
    }

    .leaderboard {
      margin-top: 14px;
      border: 1px solid rgba(55, 98, 139, 0.24);
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.86), rgba(244, 250, 255, 0.82));
      box-shadow: 0 6px 14px rgba(82, 114, 146, 0.08);
      overflow: hidden;
    }

    .leaderboard > summary {
      list-style: none;
      cursor: pointer;
      padding: 10px 12px;
      font-size: 0.95rem;
      font-weight: 700;
      color: #375372;
      display: flex;
      align-items: center;
      justify-content: space-between;
      user-select: none;
    }

    .leaderboard > summary::-webkit-details-marker {
      display: none;
    }

    .leaderboard > summary::after {
      content: "â–¾";
      font-size: 0.9rem;
      color: #5a7390;
      transition: transform 0.15s ease;
    }

    .leaderboard[open] > summary::after {
      transform: rotate(180deg);
    }

    .leaderboard > ol.rank-list {
      padding: 0 12px 11px 28px;
    }

    .rank-list {
      margin: 0;
      padding-left: 18px;
      color: #3e5772;
      font-size: 0.86rem;
      display: grid;
      gap: 6px;
    }

    .rank-list li.empty {
      color: #7b8ca0;
    }

    .ttt-board {
      display: grid;
      grid-template-columns: repeat(3, var(--ttt-cell-size));
      gap: var(--board-gap);
      width: fit-content;
      max-width: 100%;
      margin: 10px auto 0;
      touch-action: manipulation;
    }

    .ttt-cell {
      width: var(--ttt-cell-size);
      height: var(--ttt-cell-size);
      border-radius: 16px;
      font-size: clamp(1.6rem, calc(var(--ttt-cell-size) * 0.34), 2.4rem);
      font-weight: 700;
      border: 1px solid rgba(56, 95, 138, 0.22);
      background: linear-gradient(180deg, #ffffff, #edf6ff);
      color: #35527a;
    }

    .react-pad {
      margin: 10px auto 0;
      width: min(980px, 100%);
      height: var(--react-pad-height);
      border-radius: 24px;
      border: 1px solid rgba(54, 101, 140, 0.22);
      display: grid;
      place-items: center;
      text-align: center;
      color: #304867;
      font-weight: 700;
      font-size: clamp(1.1rem, 2.4vw, 1.5rem);
      user-select: none;
      touch-action: manipulation;
      transition: background 0.15s ease, box-shadow 0.15s ease, transform 0.15s ease;
    }

    .react-pad.is-waiting {
      background: linear-gradient(165deg, rgba(255, 255, 255, 0.95), rgba(236, 245, 255, 0.92));
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.4);
    }

    .react-pad.is-live {
      background:
        radial-gradient(circle at 28% 18%, rgba(255, 254, 218, 0.72), transparent 34%),
        linear-gradient(165deg, #dffff7, #87efd6 56%, #3fd0ac);
      border-color: rgba(18, 130, 101, 0.34);
      color: #0d5f4a;
      box-shadow: 0 14px 24px rgba(33, 164, 130, 0.24);
      transform: translateY(-1px);
    }

    .react-pad.is-miss {
      background: linear-gradient(170deg, #ffeef0, #ffd7dd 60%, #ffc2cc);
      border-color: rgba(173, 58, 81, 0.3);
      color: #8a2b40;
    }

    .react-pad .signal-text {
      padding: 10px;
      line-height: 1.35;
    }

    .balloon-field {
      margin: 10px auto 0;
      width: min(980px, 100%);
      height: var(--balloon-field-height);
      border-radius: 24px;
      border: 1px solid rgba(53, 98, 136, 0.2);
      background:
        radial-gradient(circle at 20% 16%, rgba(232, 246, 255, 0.7), transparent 35%),
        linear-gradient(180deg, #f7fdff, #eaf6ff);
      position: relative;
      overflow: hidden;
      touch-action: manipulation;
      user-select: none;
    }

    .balloon {
      position: absolute;
      border: 1px solid rgba(199, 91, 65, 0.32);
      border-radius: 999px;
      background: radial-gradient(circle at 30% 24%, #ffe3dd, #ff9f88 60%, #ff7f63);
      color: #7b2a1a;
      display: grid;
      place-items: center;
      transform: translate(-50%, -50%);
      box-shadow: 0 8px 14px rgba(188, 94, 78, 0.26);
      font-size: clamp(1rem, 2vw, 1.3rem);
      animation: balloon-float 1.25s ease-in-out infinite alternate;
    }

    .balloon:focus-visible {
      outline: 3px solid rgba(77, 124, 254, 0.46);
      outline-offset: 2px;
    }

    .balloon::after {
      content: "";
      position: absolute;
      width: 26%;
      height: 26%;
      left: 20%;
      top: 18%;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.45);
      pointer-events: none;
    }

    .result-panel {
      margin-top: 12px;
      border: 1px solid rgba(54, 98, 140, 0.2);
      border-radius: 16px;
      background: linear-gradient(165deg, rgba(255, 255, 255, 0.93), rgba(241, 250, 255, 0.9));
      padding: 12px;
    }

    .result-panel h3 {
      margin: 0 0 8px;
      font-size: 1rem;
      color: #2f4868;
    }

    .result-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(90px, 1fr));
      gap: 8px;
      margin-bottom: 10px;
    }

    .result-item {
      border-radius: 12px;
      border: 1px solid rgba(56, 98, 139, 0.15);
      background: rgba(255, 255, 255, 0.76);
      padding: 8px;
      font-size: 0.88rem;
      color: #516780;
    }

    .result-item strong {
      display: block;
      margin-top: 3px;
      color: #243e62;
      font-size: 1.05rem;
    }

    .memory-board {
      margin: 10px auto 0;
      display: grid;
      grid-template-columns: repeat(6, var(--memory-cell-size));
      gap: var(--board-gap);
      width: fit-content;
      max-width: 100%;
      touch-action: manipulation;
    }

    .memory-tile {
      width: var(--memory-cell-size);
      height: var(--memory-cell-size);
      border-radius: 12px;
      border: 1px solid rgba(55, 93, 134, 0.2);
      background: linear-gradient(180deg, #ffffff, #f4f8ff);
      color: #2f4867;
      font-size: clamp(0.9rem, calc(var(--memory-cell-size) * 0.34), 1.5rem);
      font-weight: 700;
    }

    .memory-tile.open {
      outline: 3px solid rgba(77, 124, 254, 0.45);
      outline-offset: 1px;
      background: #e7efff;
    }

    .memory-tile.hidden {
      border-style: dashed;
      background: rgba(218, 230, 245, 0.5);
      color: transparent;
      cursor: default;
    }

    .memory-tile.matched {
      background: linear-gradient(180deg, #dfffe9, #bff6d6);
      color: #206a46;
      border-color: rgba(29, 140, 90, 0.28);
    }

    .footer-note {
      margin-top: 14px;
      color: var(--muted);
      font-size: 0.88rem;
      text-align: center;
    }

    @keyframes fade-slide {
      from {
        opacity: 0;
        transform: translateY(7px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes speed-ripple {
      from {
        opacity: 0.85;
        transform: translate(-50%, -50%) scale(1);
      }
      to {
        opacity: 0;
        transform: translate(-50%, -50%) scale(6.8);
      }
    }

    @keyframes balloon-float {
      from {
        transform: translate(-50%, -50%) translateY(0);
      }
      to {
        transform: translate(-50%, -50%) translateY(-8px);
      }
    }

    @keyframes arena-enter {
      from {
        opacity: 0.92;
        transform: translateY(5px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes rope-pulse {
      0% {
        transform: translate(-50%, -50%) scale(1);
      }
      45% {
        transform: translate(-50%, -50%) scale(1.08);
      }
      100% {
        transform: translate(-50%, -50%) scale(1);
      }
    }

    @keyframes button-press {
      0% {
        transform: translateY(0) scale(1);
      }
      50% {
        transform: translateY(2px) scale(0.985);
      }
      100% {
        transform: translateY(0) scale(1);
      }
    }

    @media (max-width: 1080px) {
      .entry-grid {
        grid-template-columns: repeat(2, minmax(220px, 1fr));
      }
    }

    @media (max-width: 760px) {
      body {
        padding: 10px;
      }

      .home-shell,
      .game-shell {
        border-radius: 18px;
      }

      .home-shell {
        padding: 14px;
      }

      .entry-grid {
        grid-template-columns: 1fr;
      }

      .school-brand {
        min-width: 100%;
      }

      .tug-controls {
        grid-template-columns: 1fr;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation: none !important;
        transition: none !important;
      }
    }
  </style>
</head>
<body>
  <div class="bg-shape shape-a"></div>
  <div class="bg-shape shape-b"></div>

  <section id="scene-home" class="scene">
    <div class="home-shell">
      <div class="home-header">
        <div class="home-title">
          <h1>è³‡è¨Šç§‘æŠ€é€±äº’å‹•å€</h1>
        </div>
        <div class="school-brand">
          <img class="school-logo school-logo-img" alt="ä¸–ç•Œé¾å²¡å­¸æ ¡åŠ‰çš‡ç™¼ä¸­å­¸ æ ¡å¾½">
          <div class="school-meta">
            <div class="zh">ä¸–ç•Œé¾å²¡å­¸æ ¡åŠ‰çš‡ç™¼ä¸­å­¸</div>
            <div class="en">Lung Kong World Federation School Limited Lau Wong Fat Secondary School</div>
          </div>
        </div>
        <div class="top-actions">
          <button id="sound-toggle" type="button" class="primary">éŸ³æ•ˆï¼šé–‹</button>
          <button id="settings-reset" type="button" class="danger">é‚„åŸé è¨­è¨­å®š</button>
        </div>
      </div>

      <div class="entry-grid">
        <button class="entry-card accent-a" data-scene="speed" type="button">
          <span class="tag">å–®äºº</span>
          <h3>æ‰‹é€Ÿæ¸¬è©¦</h3>
          <p>10 ç§’é»æŒ‰è¡åˆºï¼Œçµç®—æœ¬å±€ CPSã€‚</p>
        </button>
        <button class="entry-card accent-b" data-scene="duel" type="button">
          <span class="tag">é›™äºº</span>
          <h3>é›™äººæ‹”æ²³</h3>
          <p>30 ç§’æ‹‰é‹¸å°æŠ—ï¼Œå…ˆæ‹‰åˆ°é‚Šç•Œæˆ–åˆ°æ™‚æŒ‰ä½ç½®åˆ¤å‹ã€‚</p>
        </button>
        <button class="entry-card accent-c" data-scene="ttt" type="button">
          <span class="tag">é›™äºº</span>
          <h3>äº•å­—æ£‹</h3>
          <p>ç¶“å…¸ 3x3 è¼ªæµè½å­ï¼Œå…ˆé€£æˆç·šç²å‹ã€‚</p>
        </button>
        <button class="entry-card accent-b" data-scene="react" type="button">
          <span class="tag">å–®äºº</span>
          <h3>åæ‡‰åŠ›é–ƒæ“Š</h3>
          <p>30 ç§’æŒçºŒæ¨¡å¼ï¼Œäº®ç‡ˆå³é»ï¼Œäº‚é»æœƒæ‰£åˆ†ã€‚</p>
        </button>
        <button class="entry-card accent-a" data-scene="balloon" type="button">
          <span class="tag">å–®äºº</span>
          <h3>æ‰“æ°£çƒ</h3>
          <p>30 ç§’éš¨æ©Ÿå½ˆå‡ºï¼Œå¿«æº–é»æŒ‰ï¼Œåˆ¥æ¼æ‰ã€‚</p>
        </button>
        <button class="entry-card accent-c" data-scene="memory" type="button">
          <span class="tag">å–®äºº</span>
          <h3>è¨˜æ†¶å°å°ç¢°</h3>
          <p>ç¿»ç‰Œæ‰¾ç›¸åŒ emojiï¼Œ24 å¼µç‰Œå…¨éƒ¨é…å°å³é€šé—œã€‚</p>
        </button>
      </div>

      
    </div>
  </section>

  <section id="scene-speed" class="scene" hidden>
    <div class="game-shell">
      <div class="scene-head">
        <button type="button" class="back-btn" data-back-home>å›é¦–é </button>
        <h2>æ‰‹é€Ÿæ¸¬è©¦</h2>
        <button id="speed-reset" type="button" class="ghost">é‡è¨­</button>
      </div>
      <p class="scene-desc">é»æŒ‰é–‹å§‹å¾Œ 10 ç§’å€’æ•¸ã€‚æ™‚é–“çµæŸè‡ªå‹•çµç®— CPSã€‚</p>
      <div class="chip-row">
        <span class="chip">å€’æ•¸ï¼š<strong id="speed-timer">10.0</strong>s</span>
        <span class="chip">é»æŒ‰ï¼š<strong id="speed-score">0</strong></span>
        <span class="chip">CPSï¼š<strong id="speed-cps">0.00</strong></span>
      </div>
      <div class="control-row">
        <button id="speed-start" type="button" class="primary">é–‹å§‹</button>
      </div>
      <div class="school-badge">
        <img class="school-badge-logo school-logo-img" alt="æ ¡å¾½">
        <span>ä¸–ç•Œé¾å²¡å­¸æ ¡åŠ‰çš‡ç™¼ä¸­å­¸</span>
      </div>
      <div id="speed-pad" class="speed-pad" aria-label="æ‰‹é€Ÿé»æŒ‰å€åŸŸ">
        <span class="hint">é»æŒ‰ä»»æ„ä½ç½®åŠ åˆ†</span>
      </div>
      <p class="status" id="speed-status">é»æŒ‰é–‹å§‹å¾Œé€²å…¥è¨ˆæ™‚ã€‚</p>
      <details class="leaderboard">
        <summary>æ’è¡Œæ¦œ Top3</summary>
        <ol id="rank-speed" class="rank-list"></ol>
      </details>
    </div>
  </section>

  <section id="scene-duel" class="scene" hidden>
    <div class="game-shell">
      <div class="scene-head">
        <button type="button" class="back-btn" data-back-home>å›é¦–é </button>
        <h2>é›™äººæ‹”æ²³</h2>
        <button id="duel-reset" type="button" class="ghost">é‡è¨­</button>
      </div>
      <p class="scene-desc">30 ç§’å…§çŒ›æŒ‰æ‹‰ç¹©ï¼Œå…ˆæ‹‰åˆ°é‚Šç•Œç«‹å³å‹ï¼›åˆ°æ™‚æŒ‰ç¹©çµä½ç½®åˆ¤å‹ã€‚</p>
      <div class="chip-row">
        <span class="chip">å€’æ•¸ï¼š<strong id="duel-timer">30.0</strong>s</span>
        <span class="chip">æ‹‰é‹¸ä½ç½®ï¼š<strong id="duel-position">0</strong></span>
      </div>
      <div class="control-row">
        <button id="duel-start" type="button" class="primary">é–‹å§‹ 30 ç§’</button>
      </div>
      <div class="school-badge">
        <img class="school-badge-logo school-logo-img" alt="æ ¡å¾½">
        <span>ä¸–ç•Œé¾å²¡å­¸æ ¡åŠ‰çš‡ç™¼ä¸­å­¸</span>
      </div>
      <div class="tug-shell">
        <div id="duel-arena" class="tug-arena" data-state="idle" data-lead="even">
          <div class="tug-track" aria-label="æ‹”æ²³æ‹‰é‹¸è»Œé“">
            <div class="tug-lead-glow"></div>
            <div class="tug-rope"></div>
            <div class="tug-center-flag"></div>
            <div id="duel-knot" class="tug-knot"></div>
          </div>
          <div class="tug-teams">
            <span class="tug-team p1">è—éšŠ P1</span>
            <span class="tug-team p2">ç¶ éšŠ P2</span>
          </div>
          <div class="tug-controls">
            <button id="duel-p1-target" type="button" class="tug-btn p1" disabled>P1 æ‹‰ç¹©</button>
            <button id="duel-p2-target" type="button" class="tug-btn p2" disabled>P2 æ‹‰ç¹©</button>
          </div>
        </div>
      </div>
      <p class="status" id="duel-status">é»æŒ‰é–‹å§‹å¾Œæ‹”æ²³ã€‚</p>
      <details class="leaderboard" open>
        <summary>æ’è¡Œæ¦œ Top3</summary>
        <ol id="rank-duel" class="rank-list"></ol>
      </details>
    </div>
  </section>
  <section id="scene-ttt" class="scene" hidden>
    <div class="game-shell">
      <div class="scene-head">
        <button type="button" class="back-btn" data-back-home>å›é¦–é </button>
        <h2>é›™äººäº•å­—æ£‹</h2>
        <button id="ttt-reset" type="button" class="ghost">æ–°ä¸€å±€</button>
      </div>
      <p class="scene-desc">åŒå±é›™äººè¼ªæµè½å­ï¼ŒX å…ˆæ‰‹ï¼Œå…ˆé€£æˆä¸‰å­ç²å‹ã€‚</p>
      <div class="chip-row">
        <span class="chip">ç•¶å‰å›åˆï¼š<strong id="ttt-turn">P1(X)</strong></span>
      </div>
      <div class="school-badge">
        <img class="school-badge-logo school-logo-img" alt="æ ¡å¾½">
        <span>ä¸–ç•Œé¾å²¡å­¸æ ¡åŠ‰çš‡ç™¼ä¸­å­¸</span>
      </div>
      <div id="ttt-board" class="ttt-board"></div>
      <p class="status" id="ttt-status">é–‹å§‹å°å±€å§ã€‚</p>
      <details class="leaderboard">
        <summary>æ’è¡Œæ¦œ Top3</summary>
        <ol id="rank-ttt" class="rank-list"></ol>
      </details>
    </div>
  </section>

  <section id="scene-react" class="scene" hidden>
    <div class="game-shell">
      <div class="scene-head">
        <button type="button" class="back-btn" data-back-home>å›é¦–é </button>
        <h2>åæ‡‰åŠ›é–ƒæ“Š</h2>
        <button id="react-start" type="button" class="primary">é–‹å§‹ 30 ç§’</button>
      </div>
      <p class="scene-desc">ä¿¡è™Ÿäº®èµ·å¾Œç«‹å³é»æŒ‰ã€‚ææ—©é»æŒ‰ç®—å¤±èª¤ä¸¦æ‰£åˆ†ã€‚</p>
      <div class="chip-row">
        <span class="chip">å€’æ•¸ï¼š<strong id="react-timer">30.0</strong>s</span>
        <span class="chip">å¾—åˆ†ï¼š<strong id="react-score">0</strong></span>
        <span class="chip">å‘½ä¸­ï¼š<strong id="react-hits">0</strong></span>
        <span class="chip">å¤±èª¤ï¼š<strong id="react-misses">0</strong></span>
        <span class="chip">å‘½ä¸­ç‡ï¼š<strong id="react-accuracy">0.0%</strong></span>
        <span class="chip">å¹³å‡åæ‡‰ï¼š<strong id="react-avg">--</strong>ms</span>
      </div>
      <div class="school-badge">
        <img class="school-badge-logo school-logo-img" alt="æ ¡å¾½">
        <span>ä¸–ç•Œé¾å²¡å­¸æ ¡åŠ‰çš‡ç™¼ä¸­å­¸</span>
      </div>
      <div id="react-pad" class="react-pad is-waiting" aria-label="åæ‡‰åŠ›é–ƒæ“Šå€åŸŸ">
        <span id="react-signal-text" class="signal-text">é»æŒ‰é–‹å§‹å¾Œï¼Œç­‰å¾…ä¿¡è™Ÿ</span>
      </div>
      <div id="react-result" class="result-panel" hidden>
        <h3>æœ¬å±€çµç®—</h3>
        <div class="result-grid">
          <div class="result-item">å¾—åˆ†<strong id="react-result-score">0</strong></div>
          <div class="result-item">å‘½ä¸­ç‡<strong id="react-result-accuracy">0.0%</strong></div>
          <div class="result-item">å¹³å‡åæ‡‰<strong id="react-result-avg">--</strong></div>
        </div>
        <button id="react-replay" type="button" class="primary">å†ç©ä¸€å±€</button>
      </div>
      <p class="status" id="react-status">æº–å‚™é–‹å§‹ã€‚</p>
      <details class="leaderboard">
        <summary>æ’è¡Œæ¦œ Top3</summary>
        <ol id="rank-react" class="rank-list"></ol>
      </details>
    </div>
  </section>

  <section id="scene-balloon" class="scene" hidden>
    <div class="game-shell">
      <div class="scene-head">
        <button type="button" class="back-btn" data-back-home>å›é¦–é </button>
        <h2>æ‰“æ°£çƒ</h2>
        <button id="balloon-start" type="button" class="primary">é–‹å§‹ 30 ç§’</button>
      </div>
      <p class="scene-desc">30 ç§’å…§éš¨æ©Ÿå½ˆå‡ºæ°£çƒã€‚é»æŒ‰å¾—åˆ†ï¼Œæ¼æ‰æœƒæ‰£åˆ†ã€‚</p>
      <div class="chip-row">
        <span class="chip">å€’æ•¸ï¼š<strong id="balloon-timer">30.0</strong>s</span>
        <span class="chip">å¾—åˆ†ï¼š<strong id="balloon-score">0</strong></span>
        <span class="chip">å‘½ä¸­ï¼š<strong id="balloon-hits">0</strong></span>
        <span class="chip">æ¼æ‰ï¼š<strong id="balloon-misses">0</strong></span>
        <span class="chip">å‘½ä¸­ç‡ï¼š<strong id="balloon-accuracy">0.0%</strong></span>
        <span class="chip">å¹³å‡åæ‡‰ï¼š<strong id="balloon-avg">--</strong></span>
      </div>
      <div class="school-badge">
        <img class="school-badge-logo school-logo-img" alt="æ ¡å¾½">
        <span>ä¸–ç•Œé¾å²¡å­¸æ ¡åŠ‰çš‡ç™¼ä¸­å­¸</span>
      </div>
      <div id="balloon-field" class="balloon-field" aria-label="æ‰“æ°£çƒå€åŸŸ"></div>
      <div id="balloon-result" class="result-panel" hidden>
        <h3>æœ¬å±€çµç®—</h3>
        <div class="result-grid">
          <div class="result-item">å¾—åˆ†<strong id="balloon-result-score">0</strong></div>
          <div class="result-item">å‘½ä¸­ç‡<strong id="balloon-result-accuracy">0.0%</strong></div>
          <div class="result-item">å¹³å‡åæ‡‰<strong id="balloon-result-avg">--</strong></div>
        </div>
        <button id="balloon-replay" type="button" class="primary">å†ç©ä¸€å±€</button>
      </div>
      <p class="status" id="balloon-status">æº–å‚™é–‹å§‹ã€‚</p>
      <details class="leaderboard">
        <summary>æ’è¡Œæ¦œ Top3</summary>
        <ol id="rank-balloon" class="rank-list"></ol>
      </details>
    </div>
  </section>

  <section id="scene-memory" class="scene" hidden>
    <div class="game-shell">
      <div class="scene-head">
        <button type="button" class="back-btn" data-back-home>å›é¦–é </button>
        <h2>è¨˜æ†¶å°å°ç¢°</h2>
        <button id="memory-reset" type="button" class="ghost">é‡è¨­</button>
      </div>
      <p class="scene-desc">ç¿»é–‹å…©å¼µç›¸åŒ emoji å³å¯é…å°ï¼Œä¸åŒ¹é…æœƒç¿»å›ã€‚</p>
      <div class="chip-row">
        <span class="chip">æ­¥æ•¸ï¼š<strong id="memory-moves">0</strong></span>
        <span class="chip">ç”¨æ™‚ï¼š<strong id="memory-time">0</strong>s</span>
        <span class="chip">é…å°ï¼š<strong id="memory-matched">0/12</strong></span>
      </div>
      <div class="school-badge">
        <img class="school-badge-logo school-logo-img" alt="æ ¡å¾½">
        <span>ä¸–ç•Œé¾å²¡å­¸æ ¡åŠ‰çš‡ç™¼ä¸­å­¸</span>
      </div>
      <div id="memory-board" class="memory-board"></div>
      <p class="status" id="memory-status">è«‹é¸æ“‡ç¬¬ä¸€å¼µç‰Œã€‚</p>
      <details class="leaderboard">
        <summary>æ’è¡Œæ¦œ Top3</summary>
        <ol id="rank-memory" class="rank-list"></ol>
      </details>
    </div>
  </section>

  <script>
    (() => {
      "use strict";

      const byId = (id) => document.getElementById(id);
      const randomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
      const shuffle = (arr) => {
        const copy = arr.slice();
        for (let i = copy.length - 1; i > 0; i -= 1) {
          const j = Math.floor(Math.random() * (i + 1));
          [copy[i], copy[j]] = [copy[j], copy[i]];
        }
        return copy;
      };
      const clamp = (min, value, max) => Math.max(min, Math.min(max, value));

      const SETTINGS_KEY = "mg_v2_settings";
      const DEFAULT_SETTINGS = { soundEnabled: true };

      const loadSettings = () => {
        try {
          const raw = localStorage.getItem(SETTINGS_KEY);
          if (!raw) {
            return { ...DEFAULT_SETTINGS };
          }
          const parsed = JSON.parse(raw);
          if (!parsed || typeof parsed !== "object") {
            return { ...DEFAULT_SETTINGS };
          }
          return { ...DEFAULT_SETTINGS, ...parsed };
        } catch (_error) {
          return { ...DEFAULT_SETTINGS };
        }
      };

      const saveSettings = (settings) => {
        try {
          localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));
        } catch (_error) {
          // ignore
        }
      };

      const SCHOOL_BRAND = {
        zhName: "ä¸–ç•Œé¾å²¡å­¸æ ¡åŠ‰çš‡ç™¼ä¸­å­¸",
        enName: "Lung Kong World Federation School Limited Lau Wong Fat Secondary School"
      };

      // Inline base64 logo (SVG fallback mark for offline single-file delivery)
      const SCHOOL_LOGO_DATA_URI = "data:image/png;base64,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";

      const applySchoolLogo = () => {
        document.querySelectorAll(".school-logo-img").forEach((img) => {
          img.src = SCHOOL_LOGO_DATA_URI;
        });
      };

      const RANKINGS_KEY = "mg_v2_rankings";
      const RANK_LIMIT = 3;
      const makeEmptyRankings = () => ({
        version: 1,
        speed: [],
        duel: [],
        ttt: [],
        react: [],
        balloon: [],
        memory: []
      });

      const normalizeRankings = (input) => {
        const base = makeEmptyRankings();
        if (!input || typeof input !== "object") {
          return base;
        }
        Object.keys(base).forEach((key) => {
          if (key === "version") {
            return;
          }
          if (Array.isArray(input[key])) {
            base[key] = input[key].slice(0, RANK_LIMIT);
          }
        });
        return base;
      };

      const loadRankings = () => {
        try {
          const raw = localStorage.getItem(RANKINGS_KEY);
          if (!raw) {
            return makeEmptyRankings();
          }
          return normalizeRankings(JSON.parse(raw));
        } catch (_error) {
          return makeEmptyRankings();
        }
      };

      let rankings = loadRankings();
      let lastNickname = "";

      const saveRankings = () => {
        try {
          localStorage.setItem(RANKINGS_KEY, JSON.stringify(rankings));
        } catch (_error) {
          // ignore
        }
      };

      const sanitizeNickname = (name) => {
        if (typeof name !== "string") {
          return "";
        }
        const trimmed = name.trim().replace(/\s+/g, " ");
        return Array.from(trimmed).slice(0, 12).join("");
      };

      const promptNickname = (hint = "è«‹è¼¸å…¥æš±ç¨±ï¼ˆ2-12å­—ï¼‰", defaultName = "") => {
        const raw = window.prompt(hint, defaultName);
        if (raw === null) {
          return "";
        }
        const name = sanitizeNickname(raw);
        if (name.length < 2) {
          return "";
        }
        lastNickname = name;
        return name;
      };

      const rankEls = {
        speed: byId("rank-speed"),
        duel: byId("rank-duel"),
        ttt: byId("rank-ttt"),
        react: byId("rank-react"),
        balloon: byId("rank-balloon"),
        memory: byId("rank-memory")
      };

      const rankLine = (gameId, item) => {
        if (gameId === "speed") {
          return `${item.name} - CPS ${Number(item.cps).toFixed(2)} / ${item.clicks}æ¬¡`;
        }
        if (gameId === "duel" || gameId === "ttt") {
          return `${item.name} - å‹å ´ ${item.wins}`;
        }
        if (gameId === "react") {
          const avg = item.avgReactionMs >= 999999 ? "--" : `${item.avgReactionMs}ms`;
          return `${item.name} - å¾—åˆ† ${item.score} / å‘½ä¸­ç‡ ${Number(item.accuracy).toFixed(1)}% / å¹³å‡ ${avg}`;
        }
        if (gameId === "balloon") {
          return `${item.name} - å¾—åˆ† ${item.score} / å‘½ä¸­ç‡ ${Number(item.accuracy).toFixed(1)}%`;
        }
        if (gameId === "memory") {
          return `${item.name} - åˆ†æ•¸ ${item.score} / ç”¨æ™‚ ${item.timeSec}s / æ­¥æ•¸ ${item.moves}`;
        }
        return `${item.name || "åŒ¿å"} - ${JSON.stringify(item)}`;
      };

      const renderLeaderboard = (gameId) => {
        const listEl = rankEls[gameId];
        if (!listEl) {
          return;
        }
        const rows = Array.isArray(rankings[gameId]) ? rankings[gameId].slice(0, RANK_LIMIT) : [];
        listEl.innerHTML = "";
        if (!rows.length) {
          const li = document.createElement("li");
          li.className = "empty";
          li.textContent = "æš«ç„¡ç´€éŒ„";
          listEl.appendChild(li);
          return;
        }
        rows.forEach((row) => {
          const li = document.createElement("li");
          li.textContent = rankLine(gameId, row);
          listEl.appendChild(li);
        });
      };

      const renderAllLeaderboards = () => {
        Object.keys(rankEls).forEach((key) => renderLeaderboard(key));
      };

      const recordSingleResult = (gameId, entry, comparator) => {
        const rows = Array.isArray(rankings[gameId]) ? rankings[gameId].slice() : [];
        rows.push(entry);
        rows.sort(comparator);
        rankings[gameId] = rows.slice(0, RANK_LIMIT);
        saveRankings();
        renderLeaderboard(gameId);
      };

      const recordPvpWin = (gameId, winnerName) => {
        const name = sanitizeNickname(winnerName);
        if (name.length < 2) {
          return;
        }
        const now = Date.now();
        const rows = Array.isArray(rankings[gameId]) ? rankings[gameId].slice() : [];
        const hit = rows.find((row) => row.name === name);
        if (hit) {
          hit.wins = (hit.wins || 0) + 1;
          hit.lastWinTs = now;
        } else {
          rows.push({ name, wins: 1, lastWinTs: now });
        }
        rows.sort((a, b) => (b.wins || 0) - (a.wins || 0) || (b.lastWinTs || 0) - (a.lastWinTs || 0));
        rankings[gameId] = rows.slice(0, RANK_LIMIT);
        saveRankings();
        renderLeaderboard(gameId);
      };

      const writeAscii = (view, offset, text) => {
        for (let i = 0; i < text.length; i += 1) {
          view.setUint8(offset + i, text.charCodeAt(i));
        }
      };

      const createWavDataUri = (freq, durationMs, volume = 0.22) => {
        const sampleRate = 22050;
        const sampleCount = Math.max(1, Math.floor(sampleRate * durationMs / 1000));
        const dataSize = sampleCount * 2;
        const buffer = new ArrayBuffer(44 + dataSize);
        const view = new DataView(buffer);

        writeAscii(view, 0, "RIFF");
        view.setUint32(4, 36 + dataSize, true);
        writeAscii(view, 8, "WAVE");
        writeAscii(view, 12, "fmt ");
        view.setUint32(16, 16, true);
        view.setUint16(20, 1, true);
        view.setUint16(22, 1, true);
        view.setUint32(24, sampleRate, true);
        view.setUint32(28, sampleRate * 2, true);
        view.setUint16(32, 2, true);
        view.setUint16(34, 16, true);
        writeAscii(view, 36, "data");
        view.setUint32(40, dataSize, true);

        for (let i = 0; i < sampleCount; i += 1) {
          const t = i / sampleRate;
          const fadeIn = Math.min(1, i / (sampleRate * 0.01));
          const fadeOut = Math.min(1, (sampleCount - i) / (sampleRate * 0.02));
          const env = Math.min(fadeIn, fadeOut);
          const sample = Math.sin(2 * Math.PI * freq * t) * env * volume;
          view.setInt16(44 + i * 2, Math.max(-1, Math.min(1, sample)) * 32767, true);
        }

        const bytes = new Uint8Array(buffer);
        let binary = "";
        const step = 0x8000;
        for (let i = 0; i < bytes.length; i += step) {
          binary += String.fromCharCode(...bytes.subarray(i, i + step));
        }

        return `data:audio/wav;base64,${btoa(binary)}`;
      };

      const SOUND_BANK = {
        click: createWavDataUri(650, 70, 0.2),
        success: createWavDataUri(920, 150, 0.24),
        fail: createWavDataUri(240, 160, 0.24)
      };

      const appState = {
        currentScene: "home",
        soundEnabled: true,
        viewport: {
          width: window.innerWidth,
          height: window.innerHeight,
          isLandscape: window.innerWidth >= window.innerHeight
        }
      };

      let audioReady = false;
      document.addEventListener("pointerdown", () => {
        audioReady = true;
      }, { once: true, passive: true });

      const playSound = (name) => {
        if (!appState.soundEnabled || !audioReady) {
          return;
        }
        const src = SOUND_BANK[name];
        if (!src) {
          return;
        }
        try {
          const audio = new Audio(src);
          audio.volume = 0.82;
          void audio.play();
        } catch (_error) {
          // ignore audio failure
        }
      };

      const settings = loadSettings();
      appState.soundEnabled = Boolean(settings.soundEnabled);

      const soundToggleBtn = byId("sound-toggle");
      const settingsResetBtn = byId("settings-reset");

      const refreshSoundToggle = () => {
        soundToggleBtn.textContent = `éŸ³æ•ˆï¼š${appState.soundEnabled ? "é–‹" : "é—œ"}`;
      };

      refreshSoundToggle();

      soundToggleBtn.addEventListener("click", () => {
        appState.soundEnabled = !appState.soundEnabled;
        saveSettings({ soundEnabled: appState.soundEnabled });
        refreshSoundToggle();
        if (appState.soundEnabled) {
          audioReady = true;
          playSound("click");
        }
      });

      settingsResetBtn.addEventListener("click", () => {
        appState.soundEnabled = true;
        saveSettings({ soundEnabled: true });
        refreshSoundToggle();
        playSound("click");
      });

      const sceneIds = ["home", "speed", "duel", "ttt", "react", "balloon", "memory"];
      const sceneEls = Object.fromEntries(sceneIds.map((id) => [id, byId(`scene-${id}`)]));

      const modules = {};

      const ResponsiveLayout = (() => {
        let resizeTimer = null;

        const computeCell = (cols, min, max, available, gap) => {
          const raw = Math.floor((available - gap * (cols - 1)) / cols);
          return clamp(min, raw, max);
        };

        const apply = () => {
          const width = window.innerWidth;
          const height = window.innerHeight;
          const isLandscape = width >= height;
          appState.viewport = { width, height, isLandscape };

          const activeScene = sceneEls[appState.currentScene] || sceneEls.home;
          const shell = activeScene
            ? activeScene.querySelector(".game-shell, .home-shell")
            : null;
          const shellWidth = shell ? shell.clientWidth : width;

          const gap = Math.round(clamp(6, width * 0.007, 12));
          const shellPadding = isLandscape && width >= 768 ? 24 : width < 480 ? 12 : 16;
          const buttonMinHeight = isLandscape && width >= 768 ? 48 : 44;
          const availableWidth = Math.max(220, Math.floor(shellWidth - shellPadding * 2 - 8));

          const tttCell = computeCell(3, 60, 150, availableWidth, gap);
          const memoryMin = isLandscape && width >= 768 ? 50 : 44;
          const memoryCell = computeCell(6, memoryMin, 120, availableWidth, gap);
          const reactPadHeight = isLandscape && width >= 768
            ? clamp(260, Math.round(height * 0.46), 430)
            : clamp(220, Math.round(height * 0.36), 340);
          const balloonFieldHeight = isLandscape && width >= 768
            ? clamp(300, Math.round(height * 0.52), 500)
            : clamp(250, Math.round(height * 0.42), 400);
          const tugTrackHeight = isLandscape && width >= 768
            ? clamp(42, Math.round(height * 0.065), 56)
            : clamp(34, Math.round(height * 0.05), 44);
          const tugKnotSize = isLandscape && width >= 768
            ? clamp(40, Math.round(height * 0.07), 52)
            : clamp(34, Math.round(height * 0.056), 44);
          const tugBtnHeight = isLandscape && width >= 768
            ? clamp(110, Math.round(height * 0.17), 140)
            : clamp(84, Math.round(height * 0.13), 108);
          const tugArenaPadding = isLandscape && width >= 768
            ? clamp(14, Math.round(width * 0.012), 24)
            : clamp(10, Math.round(width * 0.02), 16);

          const rootStyle = document.documentElement.style;
          rootStyle.setProperty("--board-gap", `${gap}px`);
          rootStyle.setProperty("--ttt-cell-size", `${tttCell}px`);
          rootStyle.setProperty("--memory-cell-size", `${memoryCell}px`);
          rootStyle.setProperty("--react-pad-height", `${reactPadHeight}px`);
          rootStyle.setProperty("--balloon-field-height", `${balloonFieldHeight}px`);
          rootStyle.setProperty("--game-shell-padding", `${shellPadding}px`);
          rootStyle.setProperty("--button-min-height", `${buttonMinHeight}px`);
          rootStyle.setProperty("--tug-track-height", `${tugTrackHeight}px`);
          rootStyle.setProperty("--tug-knot-size", `${tugKnotSize}px`);
          rootStyle.setProperty("--tug-btn-height", `${tugBtnHeight}px`);
          rootStyle.setProperty("--tug-arena-padding", `${tugArenaPadding}px`);
        };

        const onResize = () => {
          if (resizeTimer) {
            clearTimeout(resizeTimer);
          }
          resizeTimer = setTimeout(() => {
            apply();
          }, 80);
        };

        return {
          init() {
            window.addEventListener("resize", onResize, { passive: true });
            window.addEventListener("orientationchange", onResize, { passive: true });
            apply();
          },
          apply,
          destroy() {
            window.removeEventListener("resize", onResize);
            window.removeEventListener("orientationchange", onResize);
            if (resizeTimer) {
              clearTimeout(resizeTimer);
              resizeTimer = null;
            }
          }
        };
      })();

      const SceneRouter = {
        init() {
          window.addEventListener("hashchange", () => this.handleHashChange());
          this.handleHashChange();
        },
        go(sceneId) {
          const id = sceneIds.includes(sceneId) ? sceneId : "home";
          const hash = `#${id}`;
          if (location.hash !== hash) {
            location.hash = hash;
          } else {
            this.show(id);
          }
        },
        backHome() {
          this.go("home");
        },
        handleHashChange() {
          const hash = location.hash.replace("#", "").trim();
          const id = sceneIds.includes(hash) ? hash : "home";
          this.show(id);
        },
        show(id) {
          const target = sceneIds.includes(id) ? id : "home";
          const prev = appState.currentScene;

          if (prev !== target && modules[prev] && typeof modules[prev].exit === "function") {
            modules[prev].exit();
          }

          sceneIds.forEach((sceneId) => {
            sceneEls[sceneId].hidden = sceneId !== target;
          });

          appState.currentScene = target;

          if (modules[target] && typeof modules[target].enter === "function") {
            modules[target].enter();
          }

          ResponsiveLayout.apply();
        }
      };

      document.querySelectorAll("[data-scene]").forEach((btn) => {
        btn.addEventListener("click", () => {
          SceneRouter.go(btn.dataset.scene || "home");
        });
      });

      document.querySelectorAll("[data-back-home]").forEach((btn) => {
        btn.addEventListener("click", () => {
          SceneRouter.backHome();
        });
      });
      function createSpeedGame() {
        let refs;
        let running = false;
        let score = 0;
        let startAt = 0;
        let endAt = 0;
        let ticker = null;
        let recorded = false;

        const stopTicker = () => {
          if (ticker) {
            clearInterval(ticker);
            ticker = null;
          }
        };

        const render = () => {
          refs.score.textContent = String(score);
        };

        const addRipple = (event) => {
          const rect = refs.pad.getBoundingClientRect();
          const ripple = document.createElement("span");
          ripple.className = "speed-ripple";
          ripple.style.left = String(event.clientX - rect.left) + "px";
          ripple.style.top = String(event.clientY - rect.top) + "px";
          refs.pad.appendChild(ripple);
          setTimeout(() => {
            ripple.remove();
          }, 340);
        };

        const finish = () => {
          if (!running) {
            return;
          }
          running = false;
          stopTicker();
          const cps = score / 10;
          refs.timer.textContent = "0.0";
          refs.cps.textContent = cps.toFixed(2);
          refs.status.textContent = "æœ¬å±€ CPS " + cps.toFixed(2);
          refs.pad.dataset.running = "false";
          playSound("success");
          if (!recorded) {
            const name = promptNickname("æ‰‹é€Ÿæ¸¬è©¦çµæŸï¼Œè«‹è¼¸å…¥æš±ç¨±ï¼ˆ2-12å­—ï¼‰", lastNickname);
            if (name) {
              recordSingleResult(
                "speed",
                { name, cps: Number(cps.toFixed(4)), clicks: score, ts: Date.now() },
                (a, b) => (b.cps - a.cps) || (b.clicks - a.clicks) || (a.ts - b.ts)
              );
            }
            recorded = true;
          }
        };

        const tick = () => {
          const now = performance.now();
          const remain = Math.max(0, endAt - now);
          refs.timer.textContent = (remain / 1000).toFixed(1);
          const elapsed = Math.max(0.001, (now - startAt) / 1000);
          refs.cps.textContent = (score / elapsed).toFixed(2);
          if (remain <= 0) {
            finish();
          }
        };

        return {
          init(rootEl) {
            refs = {
              start: rootEl.querySelector("#speed-start"),
              reset: rootEl.querySelector("#speed-reset"),
              pad: rootEl.querySelector("#speed-pad"),
              timer: rootEl.querySelector("#speed-timer"),
              score: rootEl.querySelector("#speed-score"),
              cps: rootEl.querySelector("#speed-cps"),
              status: rootEl.querySelector("#speed-status")
            };

            refs.start.addEventListener("click", () => {
              if (running) {
                return;
              }
              running = true;
              score = 0;
              recorded = false;
              render();
              refs.timer.textContent = "10.0";
              refs.cps.textContent = "0.00";
              refs.status.textContent = "é–‹å§‹é»æŒ‰...";
              refs.pad.dataset.running = "true";
              startAt = performance.now();
              endAt = startAt + 10000;
              stopTicker();
              ticker = setInterval(tick, 50);
              playSound("click");
            });

            refs.reset.addEventListener("click", () => {
              this.reset();
              playSound("click");
            });

            refs.pad.addEventListener("pointerdown", (event) => {
              event.preventDefault();
              if (!running) {
                return;
              }
              score += 1;
              render();
              addRipple(event);
              if (score % 5 === 0) {
                playSound("click");
              }
            });

            this.reset();
          },
          enter() {},
          exit() {
            stopTicker();
            running = false;
            refs.pad.dataset.running = "false";
          },
          reset() {
            stopTicker();
            running = false;
            score = 0;
            recorded = false;
            refs.timer.textContent = "10.0";
            refs.score.textContent = "0";
            refs.cps.textContent = "0.00";
            refs.status.textContent = "é»æŒ‰é–‹å§‹å¾Œé€²å…¥è¨ˆæ™‚ã€‚";
            refs.pad.dataset.running = "false";
            refs.pad.querySelectorAll(".speed-ripple").forEach((node) => node.remove());
          },
          getState() {
            return { running, score };
          },
          destroy() {
            stopTicker();
          }
        };
      }

      function createTugGame() {
        const ROUND_MS = 30000;
        const PULL_STEP = 4;
        let refs;
        let running = false;
        let position = 0;
        let endAt = 0;
        let ticker = null;
        let finished = false;
        let knotImpactTimer = null;
        let p1PressTimer = null;
        let p2PressTimer = null;

        const stopTicker = () => {
          if (ticker) {
            clearInterval(ticker);
            ticker = null;
          }
        };

        const clearFeedbackTimers = () => {
          if (knotImpactTimer) {
            clearTimeout(knotImpactTimer);
            knotImpactTimer = null;
          }
          if (p1PressTimer) {
            clearTimeout(p1PressTimer);
            p1PressTimer = null;
          }
          if (p2PressTimer) {
            clearTimeout(p2PressTimer);
            p2PressTimer = null;
          }
        };

        const setArenaState = (state) => {
          refs.arena.dataset.state = state;
          if (state !== "running") {
            refs.arena.dataset.lead = "even";
          }
        };

        const updateLead = () => {
          const lead = position < -8 ? "p1" : position > 8 ? "p2" : "even";
          refs.arena.dataset.lead = lead;
          if (running) {
            refs.status.style.color = lead === "p1"
              ? "#2e5f9c"
              : lead === "p2"
                ? "#1f7c5d"
                : "#2d4c71";
          }
        };

        const updateTrack = () => {
          refs.position.textContent = String(position);
          refs.knot.style.setProperty("--tug-shift", String(position));
          refs.knot.style.left = `${50 + position / 2}%`;
          updateLead();
        };

        const triggerKnotImpact = () => {
          refs.knot.classList.remove("is-impact");
          void refs.knot.offsetWidth;
          refs.knot.classList.add("is-impact");
          if (knotImpactTimer) {
            clearTimeout(knotImpactTimer);
          }
          knotImpactTimer = setTimeout(() => {
            refs.knot.classList.remove("is-impact");
          }, 300);
        };

        const triggerButtonPress = (btn) => {
          const key = btn === refs.p1Target ? "p1" : "p2";
          const timerRef = key === "p1" ? p1PressTimer : p2PressTimer;
          btn.classList.remove("is-pressed");
          void btn.offsetWidth;
          btn.classList.add("is-pressed");
          if (timerRef) {
            clearTimeout(timerRef);
          }
          const nextTimer = setTimeout(() => {
            btn.classList.remove("is-pressed");
          }, 300);
          if (key === "p1") {
            p1PressTimer = nextTimer;
          } else {
            p2PressTimer = nextTimer;
          }
        };

        const settleRanking = (winnerCode) => {
          if (!winnerCode) {
            return;
          }
          const hint = winnerCode === "p1"
            ? "P1 ç²å‹ï¼è«‹è¼¸å…¥å‹è€…æš±ç¨±ï¼ˆ2-12å­—ï¼‰"
            : "P2 ç²å‹ï¼è«‹è¼¸å…¥å‹è€…æš±ç¨±ï¼ˆ2-12å­—ï¼‰";
          const name = promptNickname(hint, lastNickname);
          if (name) {
            recordPvpWin("duel", name);
          }
        };

        const finish = (forceWinner = "") => {
          if (!running) {
            return;
          }
          running = false;
          stopTicker();
          refs.p1Target.disabled = true;
          refs.p2Target.disabled = true;
          setArenaState("ended");
          refs.timer.textContent = "0.0";

          let winner = forceWinner;
          if (!winner) {
            if (position < 0) {
              winner = "p1";
            } else if (position > 0) {
              winner = "p2";
            } else {
              winner = "";
            }
          }

          if (winner === "p1") {
            refs.status.textContent = "è—éšŠï¼ˆP1ï¼‰ç²å‹";
            refs.status.style.color = "#2e5f9c";
            playSound("success");
            if (!finished) {
              finished = true;
              settleRanking(winner);
            }
            return;
          }
          if (winner === "p2") {
            refs.status.textContent = "ç¶ éšŠï¼ˆP2ï¼‰ç²å‹";
            refs.status.style.color = "#1f7c5d";
            playSound("success");
            if (!finished) {
              finished = true;
              settleRanking(winner);
            }
            return;
          }
          refs.status.textContent = "å¹³æ‰‹ï¼ˆä¸å…¥æ¦œï¼‰";
          refs.status.style.color = "#5b6f88";
          playSound("fail");
          finished = true;
        };

        const shift = (delta, triggerBtn) => {
          if (!running) {
            return;
          }
          position = clamp(-100, position + delta, 100);
          updateTrack();
          triggerKnotImpact();
          triggerButtonPress(triggerBtn);
          if (position <= -100) {
            finish("p1");
            return;
          }
          if (position >= 100) {
            finish("p2");
          }
        };

        const tick = () => {
          const remain = Math.max(0, endAt - performance.now());
          refs.timer.textContent = (remain / 1000).toFixed(1);
          if (remain <= 0) {
            finish();
          }
        };

        return {
          init(rootEl) {
            refs = {
              start: rootEl.querySelector("#duel-start"),
              reset: rootEl.querySelector("#duel-reset"),
              p1Target: rootEl.querySelector("#duel-p1-target"),
              p2Target: rootEl.querySelector("#duel-p2-target"),
              arena: rootEl.querySelector("#duel-arena"),
              timer: rootEl.querySelector("#duel-timer"),
              position: rootEl.querySelector("#duel-position"),
              knot: rootEl.querySelector("#duel-knot"),
              status: rootEl.querySelector("#duel-status")
            };

            refs.start.addEventListener("click", () => {
              if (running) {
                return;
              }
              running = true;
              finished = false;
              position = 0;
              setArenaState("running");
              updateTrack();
              refs.timer.textContent = "30.0";
              refs.status.textContent = "æ¯”è³½é€²è¡Œä¸­ï¼Œå¿«æ‹‰ç¹©ï¼";
              refs.status.style.color = "#2d4c71";
              refs.p1Target.disabled = false;
              refs.p2Target.disabled = false;
              endAt = performance.now() + ROUND_MS;
              stopTicker();
              ticker = setInterval(tick, 50);
              playSound("click");
            });

            refs.reset.addEventListener("click", () => {
              this.reset();
              playSound("click");
            });

            refs.p1Target.addEventListener("pointerdown", (event) => {
              event.preventDefault();
              shift(-PULL_STEP, refs.p1Target);
            });

            refs.p2Target.addEventListener("pointerdown", (event) => {
              event.preventDefault();
              shift(PULL_STEP, refs.p2Target);
            });

            this.reset();
          },
          enter() {},
          exit() {
            stopTicker();
            clearFeedbackTimers();
            running = false;
            refs.p1Target.disabled = true;
            refs.p2Target.disabled = true;
            setArenaState("idle");
          },
          reset() {
            stopTicker();
            clearFeedbackTimers();
            running = false;
            finished = false;
            position = 0;
            refs.timer.textContent = "30.0";
            refs.p1Target.disabled = true;
            refs.p2Target.disabled = true;
            refs.status.textContent = "é»æŒ‰é–‹å§‹å¾Œæ‹”æ²³ã€‚";
            refs.status.style.color = "#415b78";
            refs.p1Target.classList.remove("is-pressed");
            refs.p2Target.classList.remove("is-pressed");
            refs.knot.classList.remove("is-impact");
            setArenaState("idle");
            updateTrack();
          },
          getState() {
            return { running, position };
          },
          destroy() {
            stopTicker();
            clearFeedbackTimers();
          }
        };
      }

      function createTttGame() {
        let refs;
        let board = Array(9).fill("");
        let turn = "X";
        let active = true;
        let recorded = false;

        const lines = [
          [0, 1, 2], [3, 4, 5], [6, 7, 8],
          [0, 3, 6], [1, 4, 7], [2, 5, 8],
          [0, 4, 8], [2, 4, 6]
        ];

        const render = () => {
          const cells = refs.board.querySelectorAll(".ttt-cell");
          board.forEach((value, idx) => {
            cells[idx].textContent = value;
            cells[idx].disabled = !active || value !== "";
          });
          refs.turn.textContent = turn === "X" ? "P1(X)" : "P2(O)";
        };

        const winner = () => {
          for (let i = 0; i < lines.length; i += 1) {
            const [a, b, c] = lines[i];
            if (board[a] && board[a] === board[b] && board[b] === board[c]) {
              return board[a];
            }
          }
          return "";
        };

        const move = (idx) => {
          if (!active || board[idx]) {
            return;
          }

          board[idx] = turn;
          const w = winner();
          if (w) {
            active = false;
            refs.status.textContent = w === "X" ? "P1(X) ç²å‹" : "P2(O) ç²å‹";
            playSound("success");
            if (!recorded) {
              const hint = w === "X"
                ? "P1(X) ç²å‹ï¼Œè«‹è¼¸å…¥å‹è€…æš±ç¨±ï¼ˆ2-12å­—ï¼‰"
                : "P2(O) ç²å‹ï¼Œè«‹è¼¸å…¥å‹è€…æš±ç¨±ï¼ˆ2-12å­—ï¼‰";
              const name = promptNickname(hint, lastNickname);
              if (name) {
                recordPvpWin("ttt", name);
              }
              recorded = true;
            }
            render();
            return;
          }

          if (board.every((cell) => cell !== "")) {
            active = false;
            refs.status.textContent = "å¹³æ‰‹";
            playSound("fail");
            render();
            return;
          }

          turn = turn === "X" ? "O" : "X";
          refs.status.textContent = "ç¹¼çºŒè½å­";
          playSound("click");
          render();
        };

        return {
          init(rootEl) {
            refs = {
              board: rootEl.querySelector("#ttt-board"),
              turn: rootEl.querySelector("#ttt-turn"),
              status: rootEl.querySelector("#ttt-status"),
              reset: rootEl.querySelector("#ttt-reset")
            };

            refs.board.innerHTML = "";
            for (let i = 0; i < 9; i += 1) {
              const cell = document.createElement("button");
              cell.type = "button";
              cell.className = "ttt-cell";
              cell.dataset.idx = String(i);
              refs.board.appendChild(cell);
            }

            refs.board.addEventListener("pointerdown", (event) => {
              const cell = event.target.closest(".ttt-cell");
              if (!cell) {
                return;
              }
              event.preventDefault();
              const idx = Number(cell.dataset.idx);
              if (!Number.isNaN(idx)) {
                move(idx);
              }
            });

            refs.reset.addEventListener("click", () => {
              this.reset();
              playSound("click");
            });

            this.reset();
          },
          enter() {},
          exit() {},
          reset() {
            board = Array(9).fill("");
            turn = "X";
            active = true;
            recorded = false;
            refs.status.textContent = "é–‹å§‹å°å±€å§ã€‚";
            render();
          },
          getState() {
            return { board: board.slice(), turn, active };
          },
          destroy() {}
        };
      }
      function createReactionRushGame() {
        const ROUND_MS = 30000;
        let refs;
        let running = false;
        let score = 0;
        let hits = 0;
        let misses = 0;
        let reactionTotal = 0;
        let reactionCount = 0;
        let endAt = 0;
        let ticker = null;
        let signalTimer = null;
        let missFlashTimer = null;
        let signalActive = false;
        let signalAt = 0;
        let recorded = false;

        const clearTicker = () => {
          if (ticker) {
            clearInterval(ticker);
            ticker = null;
          }
        };

        const clearSignalTimer = () => {
          if (signalTimer) {
            clearTimeout(signalTimer);
            signalTimer = null;
          }
        };

        const clearMissFlashTimer = () => {
          if (missFlashTimer) {
            clearTimeout(missFlashTimer);
            missFlashTimer = null;
          }
        };

        const clearAllTimers = () => {
          clearTicker();
          clearSignalTimer();
          clearMissFlashTimer();
        };

        const accuracy = () => {
          const total = hits + misses;
          if (total === 0) {
            return 0;
          }
          return (hits / total) * 100;
        };

        const averageReaction = () => {
          if (reactionCount === 0) {
            return null;
          }
          return Math.round(reactionTotal / reactionCount);
        };

        const setPadState = (stateClass, text) => {
          refs.pad.classList.remove("is-waiting", "is-live", "is-miss");
          refs.pad.classList.add(stateClass);
          refs.signalText.textContent = text;
        };

        const renderStats = (remainMs = ROUND_MS) => {
          refs.timer.textContent = (Math.max(0, remainMs) / 1000).toFixed(1);
          refs.score.textContent = String(score);
          refs.hits.textContent = String(hits);
          refs.misses.textContent = String(misses);
          refs.accuracy.textContent = accuracy().toFixed(1) + "%";
          const avg = averageReaction();
          refs.avg.textContent = avg === null ? "--" : String(avg);
        };

        const scheduleSignal = () => {
          clearSignalTimer();
          if (!running) {
            return;
          }
          signalActive = false;
          setPadState("is-waiting", "ç­‰å¾…ä¿¡è™Ÿ...");
          const wait = randomInt(350, 1100);
          signalTimer = setTimeout(() => {
            if (!running) {
              return;
            }
            signalActive = true;
            signalAt = performance.now();
            setPadState("is-live", "ç«‹å³é»æŒ‰ï¼");
          }, wait);
        };

        const stopRound = () => {
          clearAllTimers();
          signalActive = false;
          running = false;
        };

        const finishRound = () => {
          if (!running) {
            return;
          }
          stopRound();
          renderStats(0);
          const avg = averageReaction();
          refs.resultScore.textContent = String(score);
          refs.resultAccuracy.textContent = accuracy().toFixed(1) + "%";
          refs.resultAvg.textContent = avg === null ? "--" : `${avg}ms`;
          refs.result.hidden = false;
          refs.start.disabled = false;
          setPadState("is-waiting", "æœ¬å±€çµæŸ");
          refs.status.textContent = "æ™‚é–“åˆ°ï¼Œé»æŒ‰ã€Œå†ç©ä¸€å±€ã€ã€‚";
          playSound("success");
          if (!recorded) {
            const name = promptNickname("åæ‡‰åŠ›é–ƒæ“ŠçµæŸï¼Œè«‹è¼¸å…¥æš±ç¨±ï¼ˆ2-12å­—ï¼‰", lastNickname);
            if (name) {
              recordSingleResult(
                "react",
                {
                  name,
                  score,
                  accuracy: Number(accuracy().toFixed(2)),
                  avgReactionMs: avg === null ? 999999 : avg,
                  ts: Date.now()
                },
                (a, b) =>
                  (b.score - a.score) ||
                  (b.accuracy - a.accuracy) ||
                  (a.avgReactionMs - b.avgReactionMs) ||
                  (a.ts - b.ts)
              );
            }
            recorded = true;
          }
        };

        const tick = () => {
          const remain = Math.max(0, endAt - performance.now());
          renderStats(remain);
          if (remain <= 0) {
            finishRound();
          }
        };

        const startRound = () => {
          if (running) {
            return;
          }
          clearAllTimers();
          running = true;
          signalActive = false;
          score = 0;
          hits = 0;
          misses = 0;
          reactionTotal = 0;
          reactionCount = 0;
          recorded = false;
          endAt = performance.now() + ROUND_MS;
          refs.start.disabled = true;
          refs.result.hidden = true;
          refs.status.textContent = "ç­‰å¾…ä¿¡è™Ÿï¼Œäº®èµ·å¾Œå†é»æŒ‰ã€‚";
          renderStats(ROUND_MS);
          scheduleSignal();
          ticker = setInterval(tick, 50);
          playSound("click");
        };

        const handlePadDown = (event) => {
          event.preventDefault();
          if (!running) {
            return;
          }
          if (signalActive) {
            const reactionMs = Math.max(1, Math.round(performance.now() - signalAt));
            signalActive = false;
            hits += 1;
            score = Math.max(0, score + 10);
            reactionTotal += reactionMs;
            reactionCount += 1;
            refs.status.textContent = `å‘½ä¸­ï¼åæ‡‰ ${reactionMs}ms`;
            renderStats(Math.max(0, endAt - performance.now()));
            playSound("success");
            scheduleSignal();
            return;
          }
          misses += 1;
          score = Math.max(0, score - 3);
          refs.status.textContent = "ææ—©é»æŒ‰ï¼Œæ‰£ 3 åˆ†";
          setPadState("is-miss", "å¤ªæ—©äº†");
          renderStats(Math.max(0, endAt - performance.now()));
          playSound("fail");
          clearMissFlashTimer();
          missFlashTimer = setTimeout(() => {
            if (running && !signalActive) {
              setPadState("is-waiting", "ç­‰å¾…ä¿¡è™Ÿ...");
            }
          }, 180);
        };

        return {
          init(rootEl) {
            refs = {
              start: rootEl.querySelector("#react-start"),
              replay: rootEl.querySelector("#react-replay"),
              pad: rootEl.querySelector("#react-pad"),
              signalText: rootEl.querySelector("#react-signal-text"),
              timer: rootEl.querySelector("#react-timer"),
              score: rootEl.querySelector("#react-score"),
              hits: rootEl.querySelector("#react-hits"),
              misses: rootEl.querySelector("#react-misses"),
              accuracy: rootEl.querySelector("#react-accuracy"),
              avg: rootEl.querySelector("#react-avg"),
              result: rootEl.querySelector("#react-result"),
              resultScore: rootEl.querySelector("#react-result-score"),
              resultAccuracy: rootEl.querySelector("#react-result-accuracy"),
              resultAvg: rootEl.querySelector("#react-result-avg"),
              status: rootEl.querySelector("#react-status")
            };

            refs.start.addEventListener("click", () => {
              startRound();
            });

            refs.replay.addEventListener("click", () => {
              startRound();
            });

            refs.pad.addEventListener("pointerdown", handlePadDown);

            this.reset();
          },
          enter() {},
          exit() {
            this.reset();
          },
          reset() {
            stopRound();
            score = 0;
            hits = 0;
            misses = 0;
            reactionTotal = 0;
            reactionCount = 0;
            recorded = false;
            refs.start.disabled = false;
            refs.result.hidden = true;
            refs.status.textContent = "æº–å‚™é–‹å§‹ã€‚";
            setPadState("is-waiting", "é»æŒ‰é–‹å§‹å¾Œï¼Œç­‰å¾…ä¿¡è™Ÿ");
            renderStats(ROUND_MS);
          },
          getState() {
            return { running, score, hits, misses, avgReactionMs: averageReaction() };
          },
          destroy() {
            stopRound();
          }
        };
      }

      function createBalloonPopGame() {
        const ROUND_MS = 30000;
        let refs;
        let running = false;
        let score = 0;
        let hits = 0;
        let misses = 0;
        let endAt = 0;
        let ticker = null;
        let spawnTimer = null;
        let idSeed = 0;
        const balloons = new Map();
        let recorded = false;

        const clearTicker = () => {
          if (ticker) {
            clearInterval(ticker);
            ticker = null;
          }
        };

        const clearSpawnTimer = () => {
          if (spawnTimer) {
            clearTimeout(spawnTimer);
            spawnTimer = null;
          }
        };

        const clearBalloons = () => {
          balloons.forEach((item) => {
            clearTimeout(item.lifeTimer);
            item.el.remove();
          });
          balloons.clear();
        };

        const clearAll = () => {
          clearTicker();
          clearSpawnTimer();
          clearBalloons();
          running = false;
        };

        const accuracy = () => {
          const total = hits + misses;
          if (total === 0) {
            return 0;
          }
          return (hits / total) * 100;
        };

        const renderStats = (remainMs = ROUND_MS) => {
          refs.timer.textContent = (Math.max(0, remainMs) / 1000).toFixed(1);
          refs.score.textContent = String(score);
          refs.hits.textContent = String(hits);
          refs.misses.textContent = String(misses);
          refs.accuracy.textContent = accuracy().toFixed(1) + "%";
          refs.avg.textContent = "--";
        };

        const removeBalloon = (id) => {
          const item = balloons.get(id);
          if (!item) {
            return null;
          }
          clearTimeout(item.lifeTimer);
          item.el.remove();
          balloons.delete(id);
          return item;
        };

        const onBalloonMiss = (id) => {
          const removed = removeBalloon(id);
          if (!removed || !running) {
            return;
          }
          misses += 1;
          score = Math.max(0, score - 2);
          refs.status.textContent = "æ¼æ‰ä¸€å€‹æ°£çƒï¼Œæ‰£ 2 åˆ†";
          renderStats(Math.max(0, endAt - performance.now()));
          playSound("fail");
        };

        const onBalloonHit = (id) => {
          const removed = removeBalloon(id);
          if (!removed || !running) {
            return;
          }
          hits += 1;
          score = Math.max(0, score + 8);
          refs.status.textContent = "å‘½ä¸­ +8";
          renderStats(Math.max(0, endAt - performance.now()));
          playSound("click");
        };

        const scheduleSpawn = () => {
          clearSpawnTimer();
          if (!running) {
            return;
          }
          const wait = randomInt(220, 480);
          spawnTimer = setTimeout(() => {
            spawnOne();
          }, wait);
        };

        const spawnOne = () => {
          if (!running) {
            return;
          }

          const activeLimit = randomInt(3, 5);
          if (balloons.size >= activeLimit) {
            scheduleSpawn();
            return;
          }

          const rect = refs.field.getBoundingClientRect();
          const maxSize = Math.max(62, Math.floor(Math.min(110, rect.width * 0.17)));
          const size = randomInt(58, maxSize);
          const half = Math.ceil(size / 2) + 2;
          const maxX = Math.max(half, Math.floor(rect.width - half));
          const maxY = Math.max(half, Math.floor(rect.height - half));
          const x = randomInt(half, maxX);
          const y = randomInt(half, maxY);
          const life = randomInt(900, 1600);

          idSeed += 1;
          const id = `balloon-${idSeed}`;
          const el = document.createElement("button");
          el.type = "button";
          el.className = "balloon";
          el.dataset.id = id;
          el.style.width = `${size}px`;
          el.style.height = `${size}px`;
          el.style.left = `${x}px`;
          el.style.top = `${y}px`;
          el.textContent = "ğŸˆ";

          refs.field.appendChild(el);
          const lifeTimer = setTimeout(() => {
            onBalloonMiss(id);
          }, life);
          balloons.set(id, { el, lifeTimer });

          scheduleSpawn();
        };

        const finishRound = () => {
          if (!running) {
            return;
          }
          running = false;
          clearTicker();
          clearSpawnTimer();
          clearBalloons();
          renderStats(0);
          refs.resultScore.textContent = String(score);
          refs.resultAccuracy.textContent = accuracy().toFixed(1) + "%";
          refs.resultAvg.textContent = "--";
          refs.result.hidden = false;
          refs.start.disabled = false;
          refs.status.textContent = "æ™‚é–“åˆ°ï¼Œé»æŒ‰ã€Œå†ç©ä¸€å±€ã€ã€‚";
          playSound("success");
          if (!recorded) {
            const name = promptNickname("æ‰“æ°£çƒçµæŸï¼Œè«‹è¼¸å…¥æš±ç¨±ï¼ˆ2-12å­—ï¼‰", lastNickname);
            if (name) {
              recordSingleResult(
                "balloon",
                { name, score, accuracy: Number(accuracy().toFixed(2)), ts: Date.now() },
                (a, b) => (b.score - a.score) || (b.accuracy - a.accuracy) || (a.ts - b.ts)
              );
            }
            recorded = true;
          }
        };

        const tick = () => {
          const remain = Math.max(0, endAt - performance.now());
          renderStats(remain);
          if (remain <= 0) {
            finishRound();
          }
        };

        const startRound = () => {
          if (running) {
            return;
          }
          clearAll();
          running = true;
          score = 0;
          hits = 0;
          misses = 0;
          recorded = false;
          endAt = performance.now() + ROUND_MS;
          refs.start.disabled = true;
          refs.result.hidden = true;
          refs.status.textContent = "ç„æº–æ°£çƒå¿«é€Ÿé»æŒ‰ã€‚";
          renderStats(ROUND_MS);
          spawnOne();
          ticker = setInterval(tick, 50);
          playSound("click");
        };

        return {
          init(rootEl) {
            refs = {
              start: rootEl.querySelector("#balloon-start"),
              replay: rootEl.querySelector("#balloon-replay"),
              field: rootEl.querySelector("#balloon-field"),
              timer: rootEl.querySelector("#balloon-timer"),
              score: rootEl.querySelector("#balloon-score"),
              hits: rootEl.querySelector("#balloon-hits"),
              misses: rootEl.querySelector("#balloon-misses"),
              accuracy: rootEl.querySelector("#balloon-accuracy"),
              avg: rootEl.querySelector("#balloon-avg"),
              result: rootEl.querySelector("#balloon-result"),
              resultScore: rootEl.querySelector("#balloon-result-score"),
              resultAccuracy: rootEl.querySelector("#balloon-result-accuracy"),
              resultAvg: rootEl.querySelector("#balloon-result-avg"),
              status: rootEl.querySelector("#balloon-status")
            };

            refs.start.addEventListener("click", () => {
              startRound();
            });

            refs.replay.addEventListener("click", () => {
              startRound();
            });

            refs.field.addEventListener("pointerdown", (event) => {
              const balloon = event.target.closest(".balloon");
              if (!balloon) {
                return;
              }
              event.preventDefault();
              onBalloonHit(balloon.dataset.id || "");
            });

            this.reset();
          },
          enter() {},
          exit() {
            this.reset();
          },
          reset() {
            clearAll();
            score = 0;
            hits = 0;
            misses = 0;
            recorded = false;
            refs.start.disabled = false;
            refs.result.hidden = true;
            refs.status.textContent = "æº–å‚™é–‹å§‹ã€‚";
            renderStats(ROUND_MS);
          },
          getState() {
            return { running, score, hitCount: hits, missCount: misses, accuracy: accuracy() };
          },
          destroy() {
            clearAll();
          }
        };
      }

      function createMemoryGame() {
        const ROWS = 4;
        const COLS = 6;
        const SYMBOLS = ["ğŸ˜€", "ğŸ˜º", "ğŸ", "âš½", "ğŸµ", "ğŸš—", "ğŸŒˆ", "â­", "ğŸ”¥", "ğŸ¼", "ğŸ‰", "ğŸ²"];

        let refs;
        let cards = [];
        let opened = [];
        let lock = false;
        let moves = 0;
        let timeSec = 0;
        let matchedPairs = 0;
        let timer = null;
        let started = false;
        let completed = false;

        const clearTimer = () => {
          if (timer) {
            clearInterval(timer);
            timer = null;
          }
        };

        const startTimer = () => {
          clearTimer();
          timer = setInterval(() => {
            timeSec += 1;
            refs.time.textContent = String(timeSec);
          }, 1000);
        };

        const renderStats = () => {
          refs.moves.textContent = String(moves);
          refs.time.textContent = String(timeSec);
          refs.matched.textContent = String(matchedPairs) + "/12";
        };

        const render = () => {
          const tiles = refs.board.querySelectorAll(".memory-tile");
          cards.forEach((card, idx) => {
            const tile = tiles[idx];
            tile.className = "memory-tile";
            tile.dataset.idx = String(idx);

            if (card.matched) {
              tile.classList.add("matched");
              tile.textContent = card.value;
              tile.disabled = true;
            } else if (card.open) {
              tile.classList.add("open");
              tile.textContent = card.value;
              tile.disabled = false;
            } else {
              tile.classList.add("hidden");
              tile.textContent = "?";
              tile.disabled = false;
            }
          });
          renderStats();
        };

        const finishIfDone = () => {
          if (matchedPairs < 12 || completed) {
            return;
          }
          completed = true;
          clearTimer();
          refs.status.textContent = "å®Œæˆï¼å…± " + moves + " æ­¥ï¼Œç”¨æ™‚ " + timeSec + "s";
          playSound("success");
          const name = promptNickname("è¨˜æ†¶å°å°ç¢°é€šé—œï¼Œè«‹è¼¸å…¥æš±ç¨±ï¼ˆ2-12å­—ï¼‰", lastNickname);
          if (name) {
            const base = Math.max(1, timeSec * 10 + moves);
            const score = Math.floor(100000 / base);
            recordSingleResult(
              "memory",
              { name, score, timeSec, moves, ts: Date.now() },
              (a, b) => (b.score - a.score) || (a.timeSec - b.timeSec) || (a.moves - b.moves) || (a.ts - b.ts)
            );
          }
        };

        const flip = (idx) => {
          if (lock) {
            return;
          }
          const card = cards[idx];
          if (!card || card.matched || card.open) {
            return;
          }

          if (!started) {
            started = true;
            startTimer();
          }

          card.open = true;
          opened.push(idx);
          render();
          playSound("click");

          if (opened.length < 2) {
            refs.status.textContent = "å†ç¿»ä¸€å¼µç‰Œ";
            return;
          }

          moves += 1;

          const first = cards[opened[0]];
          const second = cards[opened[1]];

          if (first.value === second.value) {
            first.matched = true;
            second.matched = true;
            opened = [];
            matchedPairs += 1;
            refs.status.textContent = "é…å°æˆåŠŸ";
            render();
            playSound("success");
            finishIfDone();
            return;
          }

          lock = true;
          refs.status.textContent = "ä¸åŒ¹é…ï¼Œç¨å¾Œç¿»å›...";
          playSound("fail");
          setTimeout(() => {
            first.open = false;
            second.open = false;
            opened = [];
            lock = false;
            refs.status.textContent = "ç¹¼çºŒå°‹æ‰¾é…å°";
            render();
          }, 700);
        };

        const setup = () => {
          const values = shuffle(SYMBOLS.flatMap((v) => [v, v]));
          cards = values.map((value) => ({ value, open: false, matched: false }));
        };

        return {
          init(rootEl) {
            refs = {
              board: rootEl.querySelector("#memory-board"),
              reset: rootEl.querySelector("#memory-reset"),
              moves: rootEl.querySelector("#memory-moves"),
              time: rootEl.querySelector("#memory-time"),
              matched: rootEl.querySelector("#memory-matched"),
              status: rootEl.querySelector("#memory-status")
            };

            refs.board.innerHTML = "";
            for (let i = 0; i < ROWS * COLS; i += 1) {
              const tile = document.createElement("button");
              tile.type = "button";
              tile.className = "memory-tile hidden";
              tile.dataset.idx = String(i);
              tile.textContent = "?";
              refs.board.appendChild(tile);
            }

            refs.board.addEventListener("pointerdown", (event) => {
              const tile = event.target.closest(".memory-tile");
              if (!tile) {
                return;
              }
              event.preventDefault();
              const idx = Number(tile.dataset.idx);
              if (!Number.isNaN(idx)) {
                flip(idx);
              }
            });

            refs.reset.addEventListener("click", () => {
              this.reset();
              playSound("click");
            });

            this.reset();
          },
          enter() {},
          exit() {
            clearTimer();
          },
          reset() {
            clearTimer();
            setup();
            opened = [];
            lock = false;
            moves = 0;
            timeSec = 0;
            matchedPairs = 0;
            started = false;
            completed = false;
            refs.status.textContent = "è«‹é¸æ“‡ç¬¬ä¸€å¼µç‰Œã€‚";
            render();
          },
          getState() {
            return { moves, timeSec, matchedPairs, running: matchedPairs < 12 };
          },
          destroy() {
            clearTimer();
          }
        };
      }

      modules.speed = createSpeedGame();
      modules.duel = createTugGame();
      modules.ttt = createTttGame();
      modules.react = createReactionRushGame();
      modules.balloon = createBalloonPopGame();
      modules.memory = createMemoryGame();

      modules.speed.init(sceneEls.speed);
      modules.duel.init(sceneEls.duel);
      modules.ttt.init(sceneEls.ttt);
      modules.react.init(sceneEls.react);
      modules.balloon.init(sceneEls.balloon);
      modules.memory.init(sceneEls.memory);

      applySchoolLogo();
      renderAllLeaderboards();
      ResponsiveLayout.init();
      SceneRouter.init();
    })();
  </script>
</body>
</html>
